<?php

/**
* @package   s9e\TextFormatter
* @copyright Copyright (c) 2010-2020 The s9e authors
* @license   http://www.opensource.org/licenses/mit-license.php The MIT License
*/
namespace s9e\TextFormatter\Bundles;

abstract class UNIT3D extends \s9e\TextFormatter\Bundle
{
	/**
	* @var s9e\TextFormatter\Parser Singleton instance used by parse()
	*/
	protected static $parser;

	/**
	* @var s9e\TextFormatter\Renderer Singleton instance used by render()
	*/
	protected static $renderer;

	/**
	* {@inheritdoc}
	*/
	public static function getJS()
	{
		return '(function(){function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
var ba=[1028],ca=["","id"],da={flags:514},ea=[function(a,b){var c={},d;for(d in b.b){var k=b.b[d],f=!1;if(d in a.b){f=k.e;var h=d,m=a.b[d];q.a=h;for(var g=0;g<f.length&&(m=f[g](m,h),!1!==m);++g);delete q.a;f=m}!1!==f?c[d]=f:k.p&&t(a)}u(a,c)}],fa=\'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:decimal-format decimal-separator="."/>$aEMAIL"><a href="mailto:{@email}">$c</a>$b$aURL"><a href="{@url}">$c</a>$b$aYOUTUBE"><span data-s9e-mediaembed="youtube" style="display:inline-block;width:100%;max-width:640px"><span style="display:block;overflow:hidden;position:relative;padding-bottom:56.25%"><iframe allowfullscreen="" loading="lazy" scrolling="no" style="background:url(https://i.ytimg.com/vi/{@id}/hqdefault.jpg) 50% 50% / cover;border:0;height:100%;left:0;position:absolute;width:100%"><xsl:attribute name="src">https://www.youtube.com/embed/$d@id"/><xsl:if test="@list">?list=$d@list"/></xsl:if><xsl:if test="@t"><xsl:choose><xsl:when test="@list">&amp;</xsl:when><xsl:otherwise>?</xsl:otherwise></xsl:choose>start=$d@t"/></xsl:if></xsl:attribute></iframe></span></span>$b$abr"><br/>$b$ae|i|s"/>$ap"><p>$c</p>$b</xsl:stylesheet>\'.replace(/\\$[a-d]/g,function(a){return{$a:\'<xsl:template match="\',
$b:"</xsl:template>",$c:"<xsl:apply-templates/>",$d:\'<xsl:value-of select="\'}[a]});
function ha(a){var b=/^(?:([a-z][-+.\\w]*):)?(?:\\/\\/(?:([^:\\/?#]*)(?::([^\\/?#]*)?)?@)?(?:(\\[[a-f\\d:]+\\]|[^:\\/?#]+)(?::(\\d*))?)?(?![^\\/?#]))?([^?#]*)(\\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(d,k){c[d]=""<b[k+1]?b[k+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\\u3002\\uff0e\\uff61]/g,".").replace(/\\.+$/g,"");/[^\\x00-\\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function ja(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""!==a.host?(b+="//",""!==a.user&&(b+=ka(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+ka(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port)):"file"===a.scheme&&(b+="//");var c=a.path+a.query+a.fragment;c=c.replace(/%.?[a-f]/g,function(d){return d.toUpperCase()},c);b+=c.replace(/[^\\u0020-\\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,escape);a.scheme||(b=b.replace(/^([^\\/]*):/,"$1%3A"));
return b}
function la(a,b){if(""!==b.scheme&&!a.A.test(b.scheme))return"URL scheme is not allowed";if(""!==b.host){var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\\d+\\.\\d+\\.\\d+\\.\\d+$/.test(c))for(var d=4,k=c.split(".");0<=--d;){if("0"===k[d][0]||255<k[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\\[(.*)\\]$/,"$1",b.host),c=!(/^([\\da-f]{0,4}:){2,7}(?:[\\da-f]{0,4}|\\d+\\.\\d+\\.\\d+\\.\\d+)$/.test(c)&&c)}if(c)return"URL host is invalid";if(a.B&&
a.B.test(b.host)||a.D&&!a.D.test(b.host))return"URL host is not allowed"}else if(/^(?:(?:f|ht)tps?)$/.test(b.scheme))return"Missing host"}function ma(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",\'"\':"&quot;"};return a.replace(/[<>&"]/g,function(c){return b[c]})}function na(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(c){return b[c]})}function ka(a){return encodeURIComponent(a).replace(/[!\'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})}
function w(){this.d={};this.h=[]}w.prototype.add=function(a,b,c){c=c||{};"attrName"in c||!this.a||(c.attrName=this.a);"tag"in c||!this.c||(c.tag=this.c);this.d[a]&&this.d[a].forEach(function(d){d(b,c)});this.h.push([a,b,c])};w.prototype.getLogs=function(){return this.h};w.prototype.on=function(a,b){this.d[a].push(b)};function oa(a,b){q.add("debug",a,b)}function x(a,b,c,d,k){this.f=+a;this.name=b;this.a=+c;this.c=+d;this.u=+k||0;this.b={};this.v=[];isNaN(a+c+d)&&t(this)}x.prototype.d=!1;
function t(a){a.d||(a.d=!0,a.v.forEach(function(b){t(b)}))}function y(a,b){pa(a,b)?(a.i=b,b.h=a,a.v.push(b),a.d&&t(b)):pa(b,a)&&(a.h=b,b.i=a)}function pa(a,b){return a.name===b.name&&1===a.f&&2===b.f&&a.a<=a.a}function qa(a){var b={},c;for(c in a.b)b[c]=a.b[c];return b}function z(a,b){return a.d||!pa(b,a)||a.h&&a.h!==b||b.i&&b.i!==a?!1:!0}function u(a,b){a.b={};for(var c in b)a.b[c]=b[c]}
var A,C,D,H,I,J,q=new w,K,L,N={Autoemail:{r:function(a,b){b.forEach(function(c){var d=M(1,"EMAIL",c[0][1],0,0);d.b.email=c[0][0];c=M(2,"EMAIL",c[0][1]+c[0][0].length,0,0);y(d,c)})},m:"@",n:/\\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,o:5E4},Autolink:{r:function(a,b){b.forEach(function(c){var d=c[0][1],k=c[0][0].replace(/(?:(?![-=)\\/_])[\\s!-.:-@[-`{-~])+$/,""),f=d+k.length,h=M(2,"URL",f,0,0);"."===k[3]&&(k="http://"+k);c=M(1,"URL",d,0,1);c.b.url=k;y(c,h);d=M(3,"v",d,f-d,1E3);c.v.push(d);c.d&&t(d)})},m:":",
n:/\\bhttps?:(?:[^\\s()\\[\\]\\uFF01-\\uFF0F\\uFF1A-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF65]|\\([^\\s()]*\\)|\\[\\w*\\])+/ig,o:5E4},BBCodes:{r:function(a,b){function c(){var v=M(3,e.w||n,p,l-p,0);u(v,g);return v}function d(){var v=M(1,e.w||n,p,l-p,0);u(v,g);return v}function k(){S||(S=a.toUpperCase());var v="[/"+n+r+"]",B=S.indexOf(v,l);return 0>B?null:M(2,e.w||n,B,v.length,0)}function f(){var v=l;for(g={};l<F;){var B=a[l];if(-1<" \\n\\t".indexOf(B))++l;else{if(-1<"/]".indexOf(B))break;var G=/^[-\\w]*/.exec(a.substr(l,
100))[0].length;if(G){B=a.substr(l,G).toLowerCase();l+=G;if(l>=F)throw"";if("="!==a[l])continue}else if("="===B&&l===v)B=e.F||n.toLowerCase();else throw"";if(++l>=F)throw"";G=g;if(\'"\'===a[l]||"\'"===a[l]){var E=a[l];var sa=l+1;do{l=a.indexOf(E,l+1);if(0>l)throw"";for(var ia=1;"\\\\"===a[l-ia];)++ia}while(0===ia%2);E=a.substr(sa,l-sa);-1<E.indexOf("\\\\")&&(E=E.replace(/\\\\([\\\\\'"])/g,"$1"));++l}else E=/(?:[^\\s\\]]|[ \\t](?!\\s*(?:[-\\w]+=|\\/?\\])))*/.exec(a.substr(l))[0],l+=E.length;G[B]=E}}}function h(){r="";
":"===a[l]&&(r=/^:\\d*/.exec(a.substr(l))[0],l+=r.length);if("/"===a[p+1])"]"===a[l]&&""===r&&(++l,M(2,e.w||n,p,l-p,0));else{f();if(e.z)for(var v in e.z)v in g||(g[v]=e.z[v]);if("]"===a[l]){++l;var B=[];e.x&&e.x.forEach(function(E){E in g||B.push(E)});var G=(v=r||e.H)||B.length?k():null;if(G)B.forEach(function(E){g[E]=a.substr(l,G.a-l)});else if(v)return;v=d();G&&y(v,G)}else"/]"===a.substr(l,2)&&(l+=2,c())}}var m={MEDIA:{x:["url"]}},g,e,n,r,l,p,F=a.length,S="";b.forEach(function(v){n=v[1][0].toUpperCase();
if(n in m){e=m[n];p=v[0][1];l=p+v[0][0].length;try{h()}catch(B){}}})},m:"[",n:/\\[\\/?(\\*|[-\\w]+)(?=[\\]\\s=:\\/])/g,o:5E4},MediaEmbed:{r:function(a,b){b.forEach(function(c){var d=c[0][0];M(3,"MEDIA",c[0][1],d.length,-10).b.url=d})},m:"://",n:/\\bhttps?:\\/\\/[^["\'\\s]+/ig,o:5E4}},O,P={"MediaEmbed.hosts":{"youtu.be":"youtube","youtube.com":"youtube"},"MediaEmbed.sites":{youtube:[[[/youtube\\.com\\/(?:watch.*?v=|v\\/|attribution_link.*?v%3D)([-\\w]+)/,ca],[/youtu\\.be\\/([-\\w]+)/,ca],[/[#&?]t=(\\d[\\dhms]*)/,["","t"]],
[/[&?]list=([-\\w]+)/,["","list"]]],[{G:[[/\\/vi\\/([-\\w]+)/,ca]],match:[[/\\/shared\\?ci=/,[""]]]}]]},urlConfig:{A:/^https?$/i}},ra={g:[1799],flags:32},Q={EMAIL:{g:ba,b:{email:{e:[function(a){return/^[-\\w.+]+@[-\\w.]+$/.test(a)?a:!1}],p:!0}},q:0,e:ea,j:10,s:da,k:5E3},MEDIA:{g:[1795],b:{},q:2,e:[function(a){return function(b,c,d){function k(f,h,m){var g=!1;m.forEach(function(e){var n=e[1],r=e[0].exec(h);r&&(g=!0,n.forEach(function(l,p){""<r[p]&&""<l&&(f[l]=r[p])}))});return g}(function(f,h,m){t(f);if("url"in
f.b){var g=f.b.url,e;a:{for(e=/^https?:\\/\\/([^\\/]+)/.exec(g.toLowerCase())[1]||"";""<e;){if(h[e]){e=h[e];break a}e=e.replace(/^[^.]*./,"")}e=""}if(m[e]){h={};k(h,g,m[e][0]);a:{for(var n in h){m=!1;break a}m=!0}if(!m){m=f.a;n=f.i;if(n){var r=f.c;g=n.a;n=n.c}else r=0,g=f.a+f.c,n=0;e=e.toUpperCase();f=f.u;g=M(2,e,g,n,-f||0);f=M(1,e,m,r,f||0);y(f,g);u(f,h)}}}})(b,c,d)}(a,P["MediaEmbed.hosts"],P["MediaEmbed.sites"],P.cacheDir)}],j:10,s:{flags:513},k:5E3},URL:{g:ba,b:{url:{e:[function(a){var b=P.urlConfig,
c=q,d=ha(a.replace(/^\\s+/,"").replace(/\\s+$/,""));(b=la(b,d))?(c&&(d.attrValue=a,c.add("err",b,d)),a=!1):a=ja(d);return a}],p:!0}},q:1,e:ea,j:10,s:da,k:5E3},YOUTUBE:{g:[1026],b:{id:{e:[function(a){return/^[-0-9A-Za-z_]+$/.test(a)?a:!1}],p:!1},list:{e:[],p:!1},t:{e:[function(a){var b=/^(?=\\d)(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s)?$/.exec(a);return b?3600*(b[1]||0)+60*(b[2]||0)+(+b[3]||0):/^(?:0|[1-9]\\d*)$/.test(a)?a:!1}],p:!1}},q:0,e:ea,j:10,s:{flags:3089},k:5E3}},R,T,U,V,ta=0,W;
function ua(a){a=a.replace(/\\r\\n?/g,"\\n");a=a.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F]+/g,"");var b=q;b.h=[];delete b.a;delete b.c;A={};C={};H=0;I=null;J=!1;K=[];L="";O=0;R=[];T=!1;U=a;V=U.length;W=0;D=ra;D.y=!1;++ta;a=ta;for(var c in N)if(!N[c].l)a:{b=c;var d=N[b];if(!(d.m&&0>U.indexOf(d.m))){var k=[];if("undefined"!==typeof d.n&&"undefined"!==typeof d.o){k=void 0;var f=d.n;d=d.o;f.lastIndex=0;for(var h=[],m=0;++m<=d&&(k=f.exec(U));){for(var g=k.index,e=[[k[0],g]],n=0;++n<k.length;){var r=k[n];void 0===
r?e.push(["",-1]):(e.push([r,U.indexOf(r,g)]),g+=r.length)}h.push(e)}k=h;if(!k.length)break a}(0,N[b].r)(U,k)}}va();X(V,!0);do c=L,L=L.replace(/<([^ />]+)[^>]*><\\/\\1>/g,"");while(L!==c);L=L.replace(/<\\/i><i>/g,"");L=L.replace(/[\\x00-\\x08\\x0B-\\x1F]/g,"");L=L.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,wa);c=J?"r":"t";L="<"+c+">"+L+"</"+c+">";if(ta!==a)throw"The parser has been reset during execution";1E4<H&&q.add("warn","Fixing cost limit exceeded",void 0);return L}
function Y(a){var b={},c;for(c in Q[a])b[c]=Q[a][c];return Q[a]=b}function wa(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function xa(a){J=!0;var b=a.name,c=a.a,d=a.c,k=0,f=!1;a.f&1||(f=!0);X(c,f);f=d?na(U.substr(c,d)):"";if(a.f&1){L+="<"+b;var h=qa(a),m=[],g;for(g in h)m.push(g);m.sort(function(e,n){return e>n?1:-1});m.forEach(function(e){L+=" "+e+\'="\'+ma(h[e].toString()).replace(/\\n/g,"&#10;")+\'"\'});L=3===a.f?d?L+(">"+f+"</"+b+">"):L+"/>":d?L+("><s>"+f+"</s>"):L+">"}else d&&(L+="<e>"+f+"</e>"),L+="</"+b+">";for(W=O=c+d;k&&W<V&&"\\n"===U[W];)--k,++W}
function X(a,b){var c=0;b&&(D.flags&8?c=-1:b=!1);O>=a&&b&&ya();if(W>O){var d=Math.min(a,W);L+=U.substr(O,d-O);O=d;O>=a&&b&&ya()}var k=a;for(d=0;c&&--k>=O;){var f=U[k];if(" "!==f&&"\\n"!==f&&"\\t"!==f)break;"\\n"===f&&--c;++d}a-=d;a>O&&(c=na(U.substr(O,a-O)),32===(D.flags&2096)&&(c=c.replace(/\\n/g,"<br/>\\n")),L+=c);b&&ya();d&&(L+=U.substr(a,d));O=a+d}function za(a){var b=a.a;a=a.c;var c=U.substr(b,a);X(b,!1);L+="<i>"+na(c)+"</i>";J=!0;O=b+a}function ya(){D.y&&(L+="</p>",D.y=!1)}
function va(){if(R.length){for(var a in Q)A[a]=0,C[a]=0;do{for(;R.length;)T||Aa(),I=R.pop(),Ba();K.forEach(function(b){var c=M(2,b.name,V,0,0);y(c,b)})}while(R.length)}}
function Ba(){D.flags&64&&!z(I,K[K.length-1])&&!(-1<"br i pb v".indexOf(I.name))&&t(I);var a=I.a,b=I.c;if(O>a&&!I.d){var c;if((c=I.h)&&0<=K.indexOf(c)){y(M(2,c.name,O,Math.max(0,a+b-O),0),c);return}if("i"===I.name&&(a=a+b-O,0<a)){b=O;M(3,"i",b,Math.min(a,V-b),0);return}t(I)}if(!I.d)if("i"===I.name)za(I);else if("br"===I.name)D.flags&1024||(X(I.a,!1),L+="<br/>");else if("pb"===I.name)X(I.a,!0);else if("v"===I.name)a=D.flags,D.flags=I.flags,X(I.a+I.c,!1),D.flags=a;else if(I.f&1)if(a=I,b=a.name,c=Q[b],
C[b]>=c.k)q.add("err","Tag limit exceeded",{tag:a,tagName:b,tagLimit:c.k}),t(a);else{var d=a,k=Q[d.name];q.c=d;for(var f=0;f<k.e.length&&!d.d;++f)k.e[f](d,k);delete q.c;a.d||(A[b]>=c.j?(q.add("err","Nesting limit exceeded",{tag:a,tagName:b,nestingLimit:c.j}),t(a)):(c=Q[b].q,D.g[c>>3]&1<<(c&7)?(!(a.flags&1&&3!==a.f)||a.i||R.length&&z(R[R.length-1],a)||(b=new x(3,b,a.a,a.c),u(b,qa(a)),b.flags=a.flags,a=b),xa(a),Ca(a)):(b={tag:a,tagName:b},0<a.c?q.add("warn","Tag is not allowed in this context",b):oa("Tag is not allowed in this context",
b),t(a))))}else Da()}
function Da(){var a=I;if(A[a.name]){for(var b=[],c=K.length;0<=--c;){var d=K[c];if(z(a,d))break;b.push(d);++H}if(0>c)oa("Skipping end tag with no start tag",{tag:a});else{b.forEach(function(){});var k=1E4>H,f=[];b.forEach(function(g){var e=g.name;k&&(g.flags&2?f.push(g):k=!1);e=new x(2,e,a.a,0);e.flags=g.flags;xa(e);Ea()});xa(a);Ea();if(b.length&&1E4>H){d=O;for(c=R.length;0<=--c&&1E4>++H;){var h=R[c];if(h.a>d||h.f&1)break;for(var m=b.length;0<=--m&&1E4>++H;)if(z(h,b[m])){b.splice(m,1);f[m]&&f.splice(m,
1);d=Math.max(d,h.a+h.c);break}}d>O&&za(new x(3,"i",O,d-O))}f.forEach(function(g){var e=M(g.f,g.name,O,0,g.u);u(e,qa(g));(g=g.i)&&y(e,g)})}}}function Ea(){var a=K.pop();--A[a.name];D=D.C}function Ca(a){var b=a.name,c=a.flags,d=Q[b];++C[b];if(3!==a.f){var k=[];D.g.forEach(function(h,m){c&512||(h=h&65280|h>>8);k.push(d.g[m]&h)});var f=c|D.flags&32;f&16&&(f&=-33);++A[b];K.push(a);D={C:D};D.g=k;D.flags=f}}
function M(a,b,c,d,k){a=new x(a,b,c,d,k||0);Q[b]&&(a.flags=Q[b].s.flags);if(!(Q[b]||-1<"br i pb v".indexOf(a.name))||0>d||0>c||c+d>V||/[\\uDC00-\\uDFFF]/.test(U.substr(c,1)+U.substr(c+d,1)))t(a);else if(Q[b]&&Q[b].l)q.add("warn","Tag is disabled",{tag:a,tagName:b}),t(a);else if(T){b=R.length;for(c=Fa(a);0<b&&c>Fa(R[b-1]);)R[b]=R[b-1],--b;R[b]=a}else R.push(a);return a}
function Aa(){for(var a={},b=[],c=R.length;0<=--c;){var d=R[c],k=Fa(d,c);b.push(k);a[k]=d}b.sort();c=b.length;for(R=[];0<=--c;)R.push(a[b[c]]);T=!0}function Fa(a,b){var c=0<=a.u,d=a.u;c||(d+=1073741824);var k=0<a.c,f;k?f=V-a.c:f={2:0,3:1,1:2}[a.f];return Ga(a.a)+ +c+Ga(d)+ +k+Ga(f)+Ga(b||0)}function Ga(a){a=a.toString(16);return"        ".substr(a.length)+a}var Ha="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function Ia(a){if(Ha){var b=new ActiveXObject("MSXML2.FreeThreadedDOMDocument.6.0");b.async=!1;b.validateOnParse=!1;b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");if(!b)throw"Cannot parse "+a;return b}function Ja(a,b){if(Ha){var c=b.createElement("div");b=b.createDocumentFragment();Z.input=Ia(a);Z.transform();for(c.innerHTML=Z.output;c.firstChild;)b.appendChild(c.firstChild);return b}return Z.transformToFragment(Ia(a),b)}var Z,Ka=Ia(fa);
if(Ha){var La=new ActiveXObject("MSXML2.XSLTemplate.6.0");La.stylesheet=Ka;Z=La.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(Ka);window.s9e||(window.s9e={});
window.s9e.TextFormatter={disablePlugin:function(a){N[a]&&(N[a].l=!0)},disableTag:function(a){Q[a]&&(Y(a).l=!0)},enablePlugin:function(a){N[a]&&(N[a].l=!1)},enableTag:function(a){Q[a]&&(Y(a).l=!1)},getLogger:function(){return q},parse:ua,preview:function(a,b){function c(h,m){var g=h.childNodes;m=m.childNodes;for(var e=g.length,n=m.length,r,l,p=0,F=0;p<e&&p<n;){r=g[p];l=m[p];if(!d(r,l))break;++p}for(var S=Math.min(e-p,n-p);F<S;){r=g[e-(F+1)];l=m[n-(F+1)];if(!d(r,l))break;++F}for(e-=F;--e>=p;)h.removeChild(g[e]),
f=h;g=n-F;if(!(p>=g)){n=k.createDocumentFragment();e=p;do l=m[e],f=n.appendChild(l);while(e<--g);F?h.insertBefore(n,h.childNodes[p]):h.appendChild(n)}}function d(h,m){if(h.nodeName!==m.nodeName||h.nodeType!==m.nodeType)return!1;if(h instanceof HTMLElement&&m instanceof HTMLElement){if(!h.isEqualNode(m)){for(var g=h.attributes,e=m.attributes,n=e.length,r=g.length;0<=--r;){var l=g[r],p=l.namespaceURI;l=l.name;m.hasAttributeNS(p,l)||(h.removeAttributeNS(p,l),f=h)}for(r=n;0<=--r;)g=e[r],p=g.namespaceURI,
l=g.name,g=g.value,g!==h.getAttributeNS(p,l)&&(h.setAttributeNS(p,l,g),f=h);c(h,m)}}else 3!==h.nodeType&&8!==h.nodeType||h.nodeValue===m.nodeValue||(h.nodeValue=m.nodeValue,f=h);return!0}var k=b.ownerDocument;if(!k)throw"Target does not have a ownerDocument";a=Ja(ua(a).replace(/<[eis]>[^<]*<\\/[eis]>/g,""),k);var f=b;"undefined"!==typeof window&&"chrome"in window&&a.querySelectorAll("script").forEach(function(h){var m=document.createElement("script");var g=h.attributes;var e="undefined"!=typeof Symbol&&
Symbol.iterator&&g[Symbol.iterator];g=e?e.call(g):{next:aa(g)};for(e=g.next();!e.done;e=g.next())e=e.value,m.setAttribute(e.name,e.value);m.textContent=h.textContent;h.parentNode.replaceChild(m,h)});c(b,a);return f},registeredVars:P,setNestingLimit:function(a,b){Q[a]&&(Y(a).j=b)},setParameter:function(a,b){Ha?Z.addParameter(a,b,""):Z.setParameter(null,a,b)},setTagLimit:function(a,b){Q[a]&&(Y(a).k=b)}};})();';
	}

	/**
	* {@inheritdoc}
	*/
	public static function getParser()
	{
		return unserialize('O:24:"s9e\\TextFormatter\\Parser":4:{s:16:"' . "\0" . '*' . "\0" . 'pluginsConfig";a:4:{s:9:"Autoemail";a:5:{s:8:"attrName";s:5:"email";s:10:"quickMatch";s:1:"@";s:6:"regexp";s:39:"/\\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/Si";s:7:"tagName";s:5:"EMAIL";s:11:"regexpLimit";i:50000;}s:8:"Autolink";a:5:{s:8:"attrName";s:3:"url";s:6:"regexp";s:120:"#\\bhttps?:(?>[^\\s()\\[\\]\\x{FF01}-\\x{FF0F}\\x{FF1A}-\\x{FF20}\\x{FF3B}-\\x{FF40}\\x{FF5B}-\\x{FF65}]|\\([^\\s()]*\\)|\\[\\w*\\])++#Siu";s:7:"tagName";s:3:"URL";s:10:"quickMatch";s:1:":";s:11:"regexpLimit";i:50000;}s:7:"BBCodes";a:4:{s:7:"bbcodes";a:1:{s:5:"MEDIA";a:1:{s:17:"contentAttributes";a:1:{i:0;s:3:"url";}}}s:10:"quickMatch";s:1:"[";s:6:"regexp";s:30:"#\\[/?(\\*|[-\\w]+)(?=[\\]\\s=:/])#";s:11:"regexpLimit";i:50000;}s:10:"MediaEmbed";a:4:{s:10:"quickMatch";s:3:"://";s:6:"regexp";s:26:"/\\bhttps?:\\/\\/[^["\'\\s]+/Si";s:7:"tagName";s:5:"MEDIA";s:11:"regexpLimit";i:50000;}}s:14:"registeredVars";a:3:{s:9:"urlConfig";a:1:{s:14:"allowedSchemes";s:12:"/^https?$/Di";}s:16:"MediaEmbed.hosts";a:2:{s:11:"youtube.com";s:7:"youtube";s:8:"youtu.be";s:7:"youtube";}s:16:"MediaEmbed.sites";a:1:{s:7:"youtube";a:2:{i:0;a:4:{i:0;a:2:{i:0;s:69:"!youtube\\.com/(?:watch.*?v=|v/|attribution_link.*?v%3D)(?\'id\'[-\\w]+)!";i:1;a:2:{i:0;s:0:"";i:1;s:2:"id";}}i:1;a:2:{i:0;s:25:"!youtu\\.be/(?\'id\'[-\\w]+)!";i:1;R:39;}i:2;a:2:{i:0;s:25:"@[#&?]t=(?\'t\'\\d[\\dhms]*)@";i:1;a:2:{i:0;s:0:"";i:1;s:1:"t";}}i:3;a:2:{i:0;s:26:"![&?]list=(?\'list\'[-\\w]+)!";i:1;a:2:{i:0;s:0:"";i:1;s:4:"list";}}}i:1;a:1:{i:0;a:2:{s:7:"extract";a:1:{i:0;a:2:{i:0;s:19:"!/vi/(?\'id\'[-\\w]+)!";i:1;R:39;}}s:5:"match";a:1:{i:0;a:2:{i:0;s:14:"!/shared\\?ci=!";i:1;a:1:{i:0;s:0:"";}}}}}}}}s:14:"' . "\0" . '*' . "\0" . 'rootContext";a:2:{s:7:"allowed";a:1:{i:0;i:1799;}s:5:"flags";i:32;}s:13:"' . "\0" . '*' . "\0" . 'tagsConfig";a:4:{s:5:"EMAIL";a:7:{s:10:"attributes";a:1:{s:5:"email";a:2:{s:11:"filterChain";a:1:{i:0;a:2:{s:8:"callback";s:61:"s9e\\TextFormatter\\Parser\\AttributeFilters\\EmailFilter::filter";s:6:"params";a:1:{s:9:"attrValue";N;}}}s:8:"required";b:1;}}s:11:"filterChain";a:1:{i:0;a:2:{s:8:"callback";s:59:"s9e\\TextFormatter\\Parser\\FilterProcessing::filterAttributes";s:6:"params";a:4:{s:3:"tag";N;s:9:"tagConfig";N;s:14:"registeredVars";N;s:6:"logger";N;}}}s:12:"nestingLimit";i:10;s:5:"rules";a:1:{s:5:"flags";i:514;}s:8:"tagLimit";i:5000;s:9:"bitNumber";i:0;s:7:"allowed";a:1:{i:0;i:1028;}}s:5:"MEDIA";a:7:{s:11:"filterChain";a:1:{i:0;a:2:{s:8:"callback";s:54:"s9e\\TextFormatter\\Plugins\\MediaEmbed\\Parser::filterTag";s:6:"params";a:5:{s:3:"tag";N;s:6:"parser";N;s:16:"MediaEmbed.hosts";N;s:16:"MediaEmbed.sites";N;s:8:"cacheDir";N;}}}s:12:"nestingLimit";i:10;s:5:"rules";a:1:{s:5:"flags";i:513;}s:8:"tagLimit";i:5000;s:10:"attributes";a:0:{}s:9:"bitNumber";i:2;s:7:"allowed";a:1:{i:0;i:1795;}}s:3:"URL";a:7:{s:10:"attributes";a:1:{s:3:"url";a:2:{s:11:"filterChain";a:1:{i:0;a:2:{s:8:"callback";s:59:"s9e\\TextFormatter\\Parser\\AttributeFilters\\UrlFilter::filter";s:6:"params";a:3:{s:9:"attrValue";N;s:9:"urlConfig";N;s:6:"logger";N;}}}s:8:"required";b:1;}}s:11:"filterChain";R:78;s:12:"nestingLimit";i:10;s:5:"rules";R:87;s:8:"tagLimit";i:5000;s:9:"bitNumber";i:1;s:7:"allowed";R:91;}s:7:"YOUTUBE";a:7:{s:10:"attributes";a:3:{s:2:"id";a:2:{s:11:"filterChain";a:1:{i:0;a:2:{s:8:"callback";s:62:"s9e\\TextFormatter\\Parser\\AttributeFilters\\RegexpFilter::filter";s:6:"params";a:2:{s:9:"attrValue";N;i:0;s:19:"/^[-0-9A-Za-z_]+$/D";}}}s:8:"required";b:0;}s:4:"list";a:2:{s:8:"required";b:0;s:11:"filterChain";R:107;}s:1:"t";a:2:{s:11:"filterChain";a:1:{i:0;a:2:{s:8:"callback";s:65:"s9e\\TextFormatter\\Parser\\AttributeFilters\\TimestampFilter::filter";s:6:"params";R:75;}}s:8:"required";b:0;}}s:11:"filterChain";R:78;s:12:"nestingLimit";i:10;s:5:"rules";a:1:{s:5:"flags";i:3089;}s:8:"tagLimit";i:5000;s:9:"bitNumber";i:0;s:7:"allowed";a:1:{i:0;i:1026;}}}}');
	}

	/**
	* {@inheritdoc}
	*/
	public static function getRenderer()
	{
		return unserialize('O:41:"s9e\\TextFormatter\\Bundles\\UNIT3D\\Renderer":2:{s:19:"enableQuickRenderer";b:1;s:9:"' . "\0" . '*' . "\0" . 'params";a:0:{}}');
	}
}